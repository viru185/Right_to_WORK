(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){function analyticsAlternate(scriptDataAlt){scriptDataAlt.forEach(script=>{const element=document.getElementById(script.scriptId);element.innerHTML=script.source});try{dtrum.enable()}catch(e){}}exports.analyticsAlternate=analyticsAlternate},{}],2:[function(require,module,exports){var scriptId="google-tag-manager";function getScriptData(){var scriptEl=document.getElementById(scriptId);var gtmKeyValue=scriptEl.getAttribute("data-ga-id");var gaDataLayerId=scriptId+"-data-layer";var gaLinkClickEventId=scriptId+"-ga-link-click-event";var gaDataElement=document.getElementById(gaDataLayerId);var gaPageName=gaDataElement.getAttribute("pageName");var gaEnvironment=gaDataElement.getAttribute("gaEnvironment");var gtmAuth=gaDataElement.getAttribute("gtmAuth");var gtmPreview=gaDataElement.getAttribute("gtmPreview");var errorDetails=gaDataElement.getAttribute("errorDetails");if(errorDetails=="accountNotVerified"){gaPageName=gaPageName+" | account-not-verified"}const tagManagerScript="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':"+"new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],"+"j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src="+"'https://www.googletagmanager.com/gtm.js?id='+i+dl + '&gtm_auth="+gtmAuth+"&gtm_preview="+gtmPreview+"&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);"+"})(window,document,'script','dataLayer','"+gtmKeyValue+"');";const linkClickEventScript="function executeGALinkClick(urlLink, actionLabel) { "+"pushLinkClickData(actionLabel).then(() => loadUrlLink(urlLink)) "+"} "+"function loadUrlLink(urlLink){ "+"window.location = urlLink "+"} "+"function pushLinkClickData(actionLabel) { "+"return new Promise(function (resolve, reject) { "+"window.dataLayer = window.dataLayer || []; window.dataLayer.push({'event':'action', 'actionType':'linkClick', 'actionLabel': actionLabel}); "+"resolve('Link Click Pushed') "+"}) "+"} ";var scriptDataList=[{scriptId:gaDataLayerId,source:`window.dataLayer = window.dataLayer || []; window.dataLayer.push({'event': 'pageLoad', 'pageName': '${gaPageName}', 'environmentType': '${gaEnvironment}'});`},{scriptId:scriptId,source:tagManagerScript},{scriptId:gaLinkClickEventId,source:linkClickEventScript}];return scriptDataList}function getScriptDataAlt(){var gaLinkClickEventId=scriptId+"-ga-link-click-event";const linkClickEventScriptAlt="function executeGALinkClick(urlLink, actionLabel) {"+"window.location = urlLink "+"} ";var scriptDataList=[{scriptId:gaLinkClickEventId,source:linkClickEventScriptAlt}];return scriptDataList}module.exports={getScriptData:getScriptData,getScriptDataAlt:getScriptDataAlt}},{}],3:[function(require,module,exports){var analyticsAlternate=require("../alternate").analyticsAlternate;function disableAnalytics(scriptData,scriptDataAlt){if(document.getElementById(scriptData.scriptId)!==null){var scriptElement=document.getElementById(scriptData.scriptId);scriptElement.parentNode.removeChild(scriptElement)}var gaDataLayerId=scriptData.scriptId+"-data-layer";if(document.getElementById(gaDataLayerId)!==null){var gaDataElement=document.getElementById(gaDataLayerId);gaDataElement.parentNode.removeChild(gaDataElement)}analyticsAlternate(scriptDataAlt);try{dtrum.disable()}catch(e){}}exports.disableAnalytics=disableAnalytics},{"../alternate":1}],4:[function(require,module,exports){function enableAnalytics(scriptData){scriptData.forEach(script=>{const element=document.getElementById(script.scriptId);element.innerHTML=script.source});try{dtrum.enable()}catch(e){}}exports.enableAnalytics=enableAnalytics},{}],5:[function(require,module,exports){var enableAnalytics=require("./enable-analytics").enableAnalytics;var analyticsAlternate=require("./alternate").analyticsAlternate;var checkCookieExists=require("../cookies/utilities").checkCookieExists;var getCookieData=require("../cookies/utilities").getCookieData;var decodeCookieData=require("../cookies/utilities").decodeCookieData;function handleAnalyticsOnPageLoad(scriptData,scriptDataAlt){if(checkCookieExists("cookies_policy")){var cookieData=decodeCookieData(getCookieData("cookies_policy"));if(cookieData.data.cookie_policy.analytics){enableAnalytics(scriptData)}else{analyticsAlternate(scriptDataAlt)}}else{analyticsAlternate(scriptDataAlt)}}exports.handleAnalyticsOnPageLoad=handleAnalyticsOnPageLoad},{"../cookies/utilities":19,"./alternate":1,"./enable-analytics":4}],6:[function(require,module,exports){var updateCookiePreferences=require("../../cookies/update-cookie-preference/index").updateCookiePreferences;function handleUserChoices(cookieBannerUserChoices){var cookieBannerUserChoiceSection=document.getElementById("cookie-banner-user-choice-section");cookieBannerUserChoices.forEach(function forEach(info){var button=document.getElementById(info.buttonId);var usersChosenOption=button.getAttribute("value");var successMessage=document.getElementById("cookie-banner-success-message");var usersChosenOptionAsBoolean=usersChosenOption==="true"?true:false;button.addEventListener("click",function click(){updateCookiePreferences(usersChosenOptionAsBoolean);cookieBannerUserChoiceSection.setAttribute("hidden","");successMessage.removeAttribute("hidden");successMessage.setAttribute("role","alert");document.getElementById(info.successSectionId).removeAttribute("hidden")})})}exports.handleUserChoices=handleUserChoices},{"../../cookies/update-cookie-preference/index":16}],7:[function(require,module,exports){var handleUserChoices=require("./handle-user-choices").handleUserChoices;var shouldBannerBeDisplayed=require("./should-banner-be-displayed").shouldBannerBeDisplayed;var deleteLegacyCookie=require("../cookies/update-cookie-preference/delete-legacy-cookie").deleteLegacyCookie;function handleCookieBanner(){var cookieBannerUserChoices=[{buttonId:"accept-analytics",successSectionId:"accepted-cookies-message"},{buttonId:"reject-analytics",successSectionId:"rejected-cookies-message"}];document.addEventListener("DOMContentLoaded",function domLoaded(){var cookieBanner=document.getElementById("cookie-banner");deleteLegacyCookie();if(cookieBanner!==null&&shouldBannerBeDisplayed()){cookieBanner.removeAttribute("hidden")}else{return}handleUserChoices(cookieBannerUserChoices);document.getElementById("close-banner").addEventListener("click",function click(){cookieBanner.setAttribute("hidden","")})})}exports.handleCookieBanner=handleCookieBanner},{"../cookies/update-cookie-preference/delete-legacy-cookie":15,"./handle-user-choices":6,"./should-banner-be-displayed":8}],8:[function(require,module,exports){var checkCookieExists=require("../../cookies/utilities").checkCookieExists;function shouldBannerBeDisplayed(){var result=false;if(!checkCookieExists("cookies_preferences_set")){result=true}return result}exports.shouldBannerBeDisplayed=shouldBannerBeDisplayed},{"../../cookies/utilities":19}],9:[function(require,module,exports){function getFormData(){let usersChosenOption;const radioButtons=document.getElementsByName("cookie-option");for(let i=0;i<radioButtons.length;i++){if(radioButtons[i].checked){usersChosenOption=radioButtons[i].value;break}}return usersChosenOption==="true"?true:false}exports.getFormData=getFormData},{}],10:[function(require,module,exports){var updateCookiePreferences=require("../cookies/update-cookie-preference").updateCookiePreferences;var setCheckedRadioButton=require("./set-checked-radio-button").setCheckedRadioButton;var getFormData=require("./get-form-data").getFormData;var toggleFormVisibility=require("./toggle-form-visibility").toggleFormVisibility;var updateElements=require("./update-elements").updateElements;function handleCookieForm(){if(!updateElements()){return}setCheckedRadioButton();var actualForm=document.getElementById("actual-form");actualForm.addEventListener("submit",function submit(event){event.preventDefault();event.stopPropagation();updateCookiePreferences(getFormData());toggleFormVisibility(actualForm)})}exports.handleCookieForm=handleCookieForm},{"../cookies/update-cookie-preference":16,"./get-form-data":9,"./set-checked-radio-button":11,"./toggle-form-visibility":12,"./update-elements":13}],11:[function(require,module,exports){var getCookieData=require("../../cookies/utilities").getCookieData;var decodeCookieData=require("../../cookies/utilities").decodeCookieData;var checkCookieExists=require("../../cookies/utilities").checkCookieExists;function setCheckedRadioButton(){let radioButtonToBeChecked;if(checkCookieExists("cookies_policy")){var cookie=getCookieData("cookies_policy");var decodedCookie=decodeCookieData(cookie);radioButtonToBeChecked=document.getElementById(decodedCookie.data.cookie_policy.analytics);radioButtonToBeChecked.checked=true}else{radioButtonToBeChecked=document.getElementById("false")}radioButtonToBeChecked.checked=true}exports.setCheckedRadioButton=setCheckedRadioButton},{"../../cookies/utilities":19}],12:[function(require,module,exports){function toggleFormVisibility(form){var formSuccessMessage=document.getElementById("update-cookie-preference-success-message");var formHeight=form.offsetHeight;formSuccessMessage.style.height=formHeight+"px";if(document.referrer.length>0){var referrerAnchor=document.getElementById("referrer");referrerAnchor.removeAttribute("hidden");referrerAnchor.setAttribute("href",document.referrer)}formSuccessMessage.removeAttribute("hidden")}exports.toggleFormVisibility=toggleFormVisibility},{}],13:[function(require,module,exports){function updateElements(){var originalForm=document.querySelector("form");var pageContentDiv=document.getElementById("gov-grid-row-content");var div=document.createElement("div");var actualForm=document.createElement("form");var column=document.getElementsByClassName("govuk-grid-column-two-thirds").item(0);var essentialCookiesDiv;var formSuccessMessage;var formWrapper;var placeholder;if(document.getElementById("update-cookie-preference-success-message")){formSuccessMessage=document.getElementById("update-cookie-preference-success-message")}if(document.getElementById("additional-cookie-form-wrapper")){formWrapper=document.getElementById("additional-cookie-form-wrapper")}if(document.getElementById("placeholder")){placeholder=document.getElementById("placeholder")}if(document.getElementById("essential-cookies")){essentialCookiesDiv=document.getElementById("essential-cookies")}if(formSuccessMessage===undefined||formWrapper===undefined||placeholder===undefined||essentialCookiesDiv===undefined){return false}if(column!==null){column.parentNode.removeChild(column)}formWrapper.removeAttribute("hidden");actualForm.innerHTML=formWrapper.innerHTML;actualForm.setAttribute("action","");actualForm.setAttribute("id","actual-form");placeholder.appendChild(actualForm);placeholder.appendChild(formSuccessMessage);div.className="govuk-grid-column-two-thirds";div.innerHTML=originalForm.innerHTML;div.append(essentialCookiesDiv);pageContentDiv.appendChild(div);originalForm.parentNode.removeChild(originalForm);formWrapper=document.getElementById("additional-cookie-form-wrapper");formWrapper.parentNode.removeChild(formWrapper);return true}exports.updateElements=updateElements},{}],14:[function(require,module,exports){var cookies=[{name:"cookies_policy",maxAge:31536e3,data:{cookie_policy:{essential:true,analytics:false}}},{name:"cookies_preferences_set",maxAge:31536e3,data:false}];function getInitialCookieData(cookieName){return cookies.find(function find(cookie){return cookie.name===cookieName})}exports.getInitialCookieData=getInitialCookieData},{}],15:[function(require,module,exports){var setCookie=require("../../utilities").setCookie;function deleteLegacyCookie(){setCookie("seen_cookie_message","",0)}exports.deleteLegacyCookie=deleteLegacyCookie},{"../../utilities":19}],16:[function(require,module,exports){var enableAnalytics=require("../../analytics/enable-analytics").enableAnalytics;var disableAnalytics=require("../../analytics/disable-analytics").disableAnalytics;var getScriptData=require("../../analytics/data").getScriptData;var getScriptDataAlt=require("../../analytics/data").getScriptDataAlt;var updatePolicyCookieData=require("./update-policy-cookie").updatePolicyCookieData;var updatePreferencesCookieData=require("./update-preferences-cookie").updatePreferencesCookieData;function handleAnalytics(useAnalyticsCookies){var scriptData=getScriptData();if(useAnalyticsCookies){enableAnalytics(scriptData)}else{var scriptDataAlt=getScriptDataAlt();disableAnalytics(scriptData,scriptDataAlt)}}function updateCookiePreferences(useAnalyticsCookies){updatePolicyCookieData(useAnalyticsCookies);updatePreferencesCookieData();handleAnalytics(useAnalyticsCookies)}exports.updateCookiePreferences=updateCookiePreferences},{"../../analytics/data":2,"../../analytics/disable-analytics":3,"../../analytics/enable-analytics":4,"./update-policy-cookie":17,"./update-preferences-cookie":18}],17:[function(require,module,exports){var setCookie=require("../../utilities").setCookie;var encodeCookieData=require("../../utilities").encodeCookieData;var getInitialCookieData=require("../../data").getInitialCookieData;function updatePolicyCookieData(useAnalyticsCookies){var cookieData=getInitialCookieData("cookies_policy");cookieData.data.cookie_policy.analytics=useAnalyticsCookies;setCookie("cookies_policy",encodeCookieData(cookieData),cookieData.maxAge)}exports.updatePolicyCookieData=updatePolicyCookieData},{"../../data":14,"../../utilities":19}],18:[function(require,module,exports){var setCookie=require("../../utilities").setCookie;var encodeCookieData=require("../../utilities").encodeCookieData;var getInitialCookieData=require("../../data").getInitialCookieData;function updatePreferencesCookieData(){var cookieData=getInitialCookieData("cookies_preferences_set");cookieData.data=true;setCookie("cookies_preferences_set",encodeCookieData(cookieData),cookieData.maxAge)}exports.updatePreferencesCookieData=updatePreferencesCookieData},{"../../data":14,"../../utilities":19}],19:[function(require,module,exports){function checkCookieExists(cookieName){return document.cookie.split(";").some(function some(item){return item.trim().startsWith(cookieName+"=")})}function setCookie(name,data,maxAge){document.cookie=name+"="+data+"; max-age="+maxAge+"; path=/"}function getCookieData(cookieName){if(!checkCookieExists(cookieName)){return undefined}return document.cookie.split("; ").find(function find(row){return row.startsWith(cookieName+"=")}).split("=")[1]}function encodeCookieData(data){return encodeURI(JSON.stringify(data))}function decodeCookieData(data){return JSON.parse(decodeURIComponent(data))}exports.decodeCookieData=decodeCookieData;exports.encodeCookieData=encodeCookieData;exports.setCookie=setCookie;exports.getCookieData=getCookieData;exports.checkCookieExists=checkCookieExists},{}],20:[function(require,module,exports){var radioReveal=require("./revealing-radio");var validationFocus=require("./validation");var handleAnalyticsOnPageLoad=require("./analytics/index").handleAnalyticsOnPageLoad;var getAnalyticsScriptData=require("./analytics/data").getScriptData;var getAnalyticsScriptDataAlt=require("./analytics/data").getScriptDataAlt;var handleCookieBanner=require("./cookie-banner").handleCookieBanner;var handleCookieForm=require("./cookie-page").handleCookieForm;require("./polyfills");window.GOVUK={};window.addEventListener("load",function pageLoadHandler(){disableSubmitButtonsOnSubmit();disableExternalLinksOnClick();radioReveal();validationFocus()},false);window.document.addEventListener("DOMContentLoaded",function onload(){handleAnalyticsOnPageLoad(getAnalyticsScriptData(),getAnalyticsScriptDataAlt())});handleCookieBanner();handleCookieForm();function disableSubmitButtonsOnSubmit(){var formEls=document.querySelectorAll("#main-content form");if(formEls.length){formEls[0].addEventListener("submit",function submitHandler(){var submitEls=formEls[0].querySelectorAll('input[type="submit"]');if(submitEls.length){[].forEach.call(submitEls,function disableButton(el){if(el.value!=="Download PDF"){el.disabled=true}})}},false)}}function clickStopper(e){e.preventDefault()}function disableExternalLinksOnClick(){var linkEls=document.querySelectorAll("a.rtwr-external-link");if(linkEls.length){[].forEach.call(linkEls,function disableLinks(el){el.addEventListener("click",function clickHandler(){el.addEventListener("click",clickStopper,false)},false)})}}},{"./analytics/data":2,"./analytics/index":5,"./cookie-banner":7,"./cookie-page":10,"./polyfills":21,"./revealing-radio":22,"./validation":23}],21:[function(require,module,exports){if(!Array.prototype.find){Array.prototype.find=function findItem(callback){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}else if(typeof callback!=="function"){throw new TypeError("callback must be a function")}var list=Object(this);var length=list.length>>>0;var thisArg=arguments[1];for(var i=0;i<length;i++){var element=list[i];if(callback.call(thisArg,element,i,list)){return element}}}}if(!String.prototype.startsWith){Object.defineProperty(String.prototype,"startsWith",{value:function getValue(search,rawPos){var pos=rawPos>0?rawPos|0:0;return this.substring(pos,pos+search.length)===search}})}},{}],22:[function(require,module,exports){var inputs;var groups;var toggleAttr="data-toggle";module.exports=progressiveReveal;function progressiveReveal(){var forms=document.getElementsByTagName("form");if(forms.length>0){var input;inputs=Array.from(document.querySelectorAll("input"));groups=groupBy(inputs,"name");for(var i=0,num=inputs.length;i<num;i++){input=inputs[i];if(input.type.match(/radio|checkbox/)){once(input,"progressive-reveal",setupReveal)}}}}function setupReveal(input){var element=input.getAttribute(toggleAttr);var toggleId=document.getElementById(element+"-panel")?element+"-panel":element;var toggle=document.getElementById(toggleId);if(toggle){input.setAttribute("aria-controls",toggleId);inputClicked(null,input)}input.addEventListener("click",inputClicked,false)}function inputClicked(e,target){var shown;target=target||e.target||e.srcElement;groups[target.name].forEach(function(input){var hiddenClass="govuk-radios__conditional--hidden";var id=input.getAttribute("aria-controls");var toggle=document.getElementById(id);if(toggle){if(input.checked){toggle.setAttribute("aria-hidden","false");toggle.classList.remove(hiddenClass);shown=toggle.id;var elementToFocus=toggle.querySelectorAll("input")[0];if(input===target&&elementToFocus){elementToFocus.focus()}}else{if(shown!==toggle.id){toggle.setAttribute("aria-hidden","true");toggle.classList.add(hiddenClass)}}}})}function once(elem,key,callback){if(!elem){return}elem.started=elem.started||{};if(!elem.started[key]){elem.started[key]=true;callback(elem)}}function groupBy(arr,criteria){return arr.reduce(function(obj,item){var key=typeof criteria==="function"?criteria(item):item[criteria];if(!obj.hasOwnProperty(key)){obj[key]=[]}obj[key].push(item);return obj},{})}},{}],23:[function(require,module,exports){module.exports=validationFocus;function validationFocus(){var summaries=document.querySelectorAll(".govuk-error-summary");if(summaries.length){var summary=summaries[0];summary.focus()}}},{}]},{},[20]);
